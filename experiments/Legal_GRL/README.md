<a name="readme-top"></a>
<!-- ABOUT THE PROJECT -->
## CLERK: a Companion Large Language Model Expert for Modeling Regulatory Knowledge

CLERK assists with Legal GRL modeling by implementing the [ToT4DM](https://github.com/BESSER-PEARL/dsl-tot-dm/) approach with three key features:

1. **Tree-of-Thought (ToT) framework**: breaks down complex steps into manageable tasks, focusing only on essential information for constructing a Legal GRL model.

2. **Self-evaluation and branch selection** – evaluates intermediate outputs and advances along the most promising path to build the final Legal GRL model.

3. **Enhanced in-context learning** – uses context manager, role prompting, zero-shot and few-shot CoT, and structured output formatting with explicit syntax definition.

<!-- GETTING STARTED -->
## Setup

### Prerequisites

Request OpenAI or Azure keys to have access to the LLM API. Instructions are in the following links:

* [OpenAI](https://platform.openai.com/docs/quickstart)
* [AzureOpenAI](https://learn.microsoft.com/en-gb/azure/ai-services/openai/quickstart?tabs=command-line%2Cpython&pivots=programming-language-python)

Create the .env file with the variables indicated in this [file](../../.env_example):


### Run CLERK

1. Install Python 3.11 and create a virtual environment
2. Install the required packages:
   ```sh
   pip install -r requirements.txt
   ```
3. Run the CLERK program:
   ```sh
   python clerk.py --law_article "input_law.txt" 
   --focal_actors "Tax Authority and Consumer" 
   --model_focus "Ignore the gas related regulation"
   ```
4. To execute CLERK with a new law article, the law article parameter must be provided as a text file, while focal actors and model focus are provided as strings. The law article and focal actors parameters are mandatory, while model focus is optional. Find more examples [here](input/run_clerk_experiments.sh).

5. A log records all the intermediate thoughts generated by CLERK. A text file output_<input_file_name>.txt (e.g. output_input_law.txt) is created with the legal GRL model.
   
## Paper Experiments

The results of the experiments include the [reference models](reference_model/) and the [output](output/) from the experiments.
To run the experiments, use the [input](input/) data with the law articles. Then execute the experiment:
   ```sh
   python run_clerk_experiments.sh
   ```




