<a name="readme-top"></a>
<!-- ABOUT THE PROJECT -->
## CLERK: a Companion Large Language Model Expert for Modeling Regulatory Knowledge

CLERK assists with Legal GRL modeling by implementing the [ToT4DM](https://github.com/BESSER-PEARL/dsl-tot-dm/) approach with three key features:

1. **Tree-of-Thought (ToT) framework**: breaks down complex steps into manageable tasks, focusing only on essential information for constructing a Legal GRL model.

2. **Self-evaluation and branch selection** – evaluates intermediate outputs and advances along the most promising path to build the final Legal GRL model.

3. **Enhanced in-context learning** – uses context manager, role prompting, zero-shot and few-shot CoT, and structured output formatting with explicit syntax definition.

<!-- GETTING STARTED -->
## Setup

### Prerequisites

Request OpenAI or Azure keys to have access to the LLM API. Instructions are in the following links:

* [OpenAI](https://platform.openai.com/docs/quickstart)
* [AzureOpenAI](https://learn.microsoft.com/en-gb/azure/ai-services/openai/quickstart?tabs=command-line%2Cpython&pivots=programming-language-python)

Create the .env file with the variables indicated in this [file](../../env_example):


### Run CLERK

1. Install Python 3.11 and create a virtual environment
2. Install the required packages:
   ```sh
   pip install -r requirements.txt
   ```
3. Customize the input file with your law article, see the [how-to](#how-to-execute-clerk-with-a-new-law-article) section.
4. Run the application with your model:
   ```sh
   python run_clerk.py
   ```
5. A log records all the intermediate thoughts generated by CLERK. A text file output_legalgrl.txt is created with the legal GRL model.
   

<!-- RECOMMENDATIONS -->

### How to execute CLERK with a new Law article

An example of the input file for CLERK is available [here](input/input_law_art50_1.txt). To use CLERK with a new law article, follow these steps:
1. **Modeling purpose:** Under the tag `### Purpose ###`, specify the following:
   - The focus of the model (e.g. aspects to include or ignore)
   - The focal actors for the legal GRL model.
2. **Law article:** Under the tag `### Law Article ###`, insert the text of the law article that you want to model. 

Make sure text is added only below the appropriate tag, keeping the tags themselves unchanged.

<!-- USAGE EXAMPLES -->
## Paper Experiments

The results of the experiments include the [reference models](reference_model/) and the [output](output/) from the experiments.
To run the experiments, use the [input](input/) data with the domain descriptions and models. Then execute the experiment:
   ```sh
   python run_clerk.py
   ```




